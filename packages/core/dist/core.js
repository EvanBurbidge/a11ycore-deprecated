"use strict";const admin=require("firebase-admin"),serviceKey=require("./serviceAccount.json"),{mount,normaliseBuild,isEmptyObjectOrNull}=require("./utils");module.exports={mount,sendBuild,normaliseBuild,isEmptyObjectOrNull};function sendBuild(a,b){const c=admin.initializeApp({credential:admin.credential.cert(serviceKey),databaseURL:"https://a11ycore.firebaseio.com"}),d=c.firestore(),e=d.collection("builds"),f=d.collection("projects");return new Promise((c,d)=>{if(!a)throw Error("you must supply a project id");const g=normaliseBuild(a,b,admin);f.doc(a).get().then(a=>{if(!a.empty)e.add(g).then(c).catch(d);else throw d(),Error("that project does not exist")}).catch(a=>{throw d(),console.error(a),Error("that project does not exist")})})}